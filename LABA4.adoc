= Отчет по лабораторной работе №4

*Задание.*
Тактирование микроконтроллера осуществляется от  PLL источника на частоте равной 10 МГц
или близкой к ней. По нажатию кнопки изменить состояние 4 светодиодов на противоположные.
Нажатием кнопки считается разовое нажатие и отжатие кнопки.

*_Выполнение задания:_*

1.Первым делом настроим тактирование микроконтроллера  от PLL источника частотой около 10 МГц.
Для этого включим внешний источник HSE. Затем дожидаемся его готовности.
Переключим на выбранный источник системную частоту.Дождемся переключения.Отключим
внутренний источник HSI. Затем переключим PLL на HSE , с помощью регистра PLLCFGR.
Далее необходимо установить нужную частоту. Зная систему тактирования нашего
микроконтроллера, мы можем начать установку частоты с модуля НSE , который имеет
известную частоту равную 8 МГц. Следуя схеме мы попадаем на делитель,в котором должны
преобразовать нашу частоту таким образом чтобы на модуле VCC её значение составило 2 или
1 МГц. Для этого разделим известную частоту на 4 и в итоге на модуль VCC попадает начение
2 МГц. Далее для получения заданного значения нужно умножить и разделить значение модуля
VCC на некоторые числа.Так как мы не смогли  настроить частоту ниже 15 МГц включительно.
Взяли частоту равную 16,67 МГц.
Для этого умножаем частоту на 50 получаем на выходе частоту 100
МГц. Данное частота является верной так как лежит в диапазоне от 100 до 432 МГц. Затем
на делитель р, который может принимать значения 2, 4, 6, 8. Разделим 100 МГц на 6 и в
итоге получим частоту 16,67 МГц. И переключаем системный источник на полученную
частоту. Дожидаемся, пока системная частота переключится на наш источник.

2.Затем, подключим порты А и С к шине тактирования и переведем их в состояние Enable.
Настроим ножку  GPIOC13 на вход, а ножки GPIOC5, GPIOC8, GPIOC9 и GPIOА5 подключаются на выход.

3.Для коректной работы программы воспользуемся циклом while.
Введем переменную flag, которая определяет кнопка нажата первый или второй раз.
Если кнопка нажата первый раз ,то светодиоды включены, если второй - они выключаются.
Для отслеживания состояния порта кнопки используется входной регистр данных IDR. Если состояние
порта Low, то переключаем светодиоды в High. Если состояние
порта High, то переключаем светодиоды в Low.

*_Код программы:_*

image::https://github.com/musenzovakhomenko/laba4/blob/main/1.jpg[]

image::https://github.com/musenzovakhomenko/laba4/blob/main/2.jpg[]

image::https://github.com/musenzovakhomenko/laba4/blob/main/3.jpg[]

*_Результат работы программы:_*

image::https://github.com/musenzovakhomenko/laba4/blob/main/20201108_210425.gif[]